<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print">

    <title>{{blogname}}--Round A APAC Test 2016 B gCube</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Round A APAC Test 2016 B gCube</h1>
        <h2>{{ subtitle }}</h2>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
		<a id="blog" class="anchor" href="/" aria-hidden="true">
			<span aria-hidden="true" class="octicon octicon-link">INDEX</span>
		</a>
		</h1>
		<h1 id="problem">Problem</h1>
<p>Googlers are very interested in cubes, but they are bored with normal three-dimensional cubes and also want to think about other kinds of cubes! A "D-dimensional cube" has D dimensions, all of equal length. (D may be any positive integer; for example, a 1-dimensional cube is a line segment, and a 2-dimensional cube is a square, and a 4-dimensional cube is a hypercube.) A "D-dimensional cuboid" has D dimensions, but they might not all have the same lengths.</p>
<p>Suppose we have an N-dimensional cuboid. The N dimensions are numbered in order (0, 1, 2, ..., N - 1), and each dimension has a certain length. We want to solve many subproblems of this type:</p>
<ol>
<li>
<p>Take all consecutive dimensions between the Li-th dimension and Ri-th dimension, inclusive.</p>
</li>
<li>
<p>Use those dimensions to form a D-dimensional cuboid, where D = Ri - Li + 1. (For example, if Li = 3 and Ri = 6, we would form a 4-dimensional cuboid using the 3rd, 4th, 5th, and 6th dimensions of our N-dimensional cuboid.)</p>
</li>
<li>
<p>Reshape it into a D-dimensional cube that has exactly the same volume as that D-dimensional cuboid, and find the edge length of that cube.</p>
</li>
</ol>
<p>Each test case will have M subproblems like this, all of which use the same original N-dimensional cuboid. </p>
<h1 id="_1">题意</h1>
<p>输出(l - r + 1)个数字的几何平均数</p>
<h1 id="_2">思路</h1>
<p>这道题一开始想到要用高精来计算，但是usaxena95提供了更好的办法，对每个数字log10,再把对数相加，除以(l - r + 1)得到log10(ans),最终pow(10,log10(ans)),这样就避免了乘法和开方中严重的精度流失</p>
<h1 id="code">Code</h1>
<pre><code class="c++">#include &lt;cstdio&gt;
#include &lt;map&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;iostream&gt;
#include &lt;assert.h&gt;
#include &lt;sstream&gt;
#include &lt;cctype&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;map&gt;
using namespace std;
typedef pair&lt;int,int&gt; P;
typedef long long ll;
typedef long double ld;
const int maxn = 1e3 + 3;
ld a[maxn];
ld lg[maxn];

int main()
{
    freopen(&quot;B-large-practice.in&quot;,&quot;r&quot;,stdin);
    freopen(&quot;B-large-practice.out&quot;,&quot;w&quot;,stdout);
    int t;
    scanf(&quot;%d&quot;,&amp;t);
    for(int ti = 1;ti &lt;= t;ti++){
        printf(&quot;Case #%d:
&quot;,ti);
        int n,m;
        scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
        for(int i = 0;i &lt; n;i++){
            scanf(&quot;%Lf&quot;,a + i);
            lg[i] = log10(a[i]);
        }
        for(int i = 0;i &lt; m;i++){
            int f,t;
            scanf(&quot;%d%d&quot;,&amp;f,&amp;t);
            ld s = 0;
            for(int j = f;j &lt;= t;j++)s += lg[j];
            s /= (t - f + 1);
            ld ans = pow(10,s);
            printf(&quot;%.9Lf
&quot;,ans);
        }
    }

    return 0;
}

</code></pre>

      </section>
    </div>

    
  </body>
</html>
